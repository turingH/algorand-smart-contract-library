# AI 审计方案 - 管理员账户 rekey 场景评估

## 背景
`audit_001_036_plan_report.md` 建议在文档中说明 `UInt64SetLib` 511 项限制，未发现代码漏洞。
此前的审计已验证 `InitialisableWithCreator` 对创建者的检查可靠[#21]。
然而尚未评估当管理员或创建者账户执行 rekey 后，对权限管理与初始化流程的影响。

## 新方向
研究管理员地址被重新绑定到其他私钥（rekey）后，现有角色与初始化机制是否仍能正常工作，
以及是否存在管理权丢失或被篡改的风险。

## 目标
1. 分析 `AccessControl` 与 `InitialisableWithCreator` 在校验 `Txn.sender` 时对 rekey 的适应性。
2. 设计最小合约实验：部署后将管理员账户 rekey 到新密钥，验证 `grant_role`、`initialise` 等调用是否受影响。
3. 检查 README 与 DeepWiki 是否提醒开发者在使用本库时注意账户 rekey 造成的潜在问题。

## 方法与步骤
1. **代码审查**
   - 阅读 `grant_role`、`renounce_role` 等实现，确认权限验证仅依赖地址而非公钥。
   - 调研 Algorand rekey 机制对 `Txn.sender` 的影响，推导其与角色绑定逻辑的关系。
2. **实验验证**
   - 如环境允许，使用脚本模拟账户 rekey 后再次调用相关方法，记录行为差异。
   - 若无法运行链上测试，可提供理论推导或伪代码展示流程。
3. **文档检查**
   - 搜索仓库文档和 DeepWiki，确认是否有关于管理员账户 rekey 的说明或最佳实践。

## 预期输出
- 结论 rekey 是否会破坏已授予的权限或初始化入口。
- 如存在风险，提出在文档中标注或在库层加入转移管理员角色的指南。

> 注：本文件仅为审计计划，尚未执行任何审计工作。
